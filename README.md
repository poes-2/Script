local WebhookURL = "https://discord.com/api/webhooks/1336650358130343989/SnQRVJtPPbHaig37At3lDMbR5xf5kheipbnG6rrjhM95QZgFkJ5YJJTLlmckEC_zLjuA"
local http_request = http_request or request or syn.request
if not http_request then
    error("‚ùå Executor ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö HTTP Requests!")
end

-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏õ‡∏¢‡∏±‡∏á Webhook
function sendWebhookMessage(username, level, matchDMG, wave, result, rewards)
    local data = {
        ["embeds"] = {{
            ["title"] = "Anime Adventures - Match Result",
            ["color"] = 5814783,
            ["fields"] = {
                {["name"] = "üë§ User", ["value"] = username, ["inline"] = true},
                {["name"] = "üî¢ Level", ["value"] = tostring(level), ["inline"] = true},
                {["name"] = "üó°Ô∏è Match DMG", ["value"] = tostring(matchDMG) .. "M", ["inline"] = true},
                {["name"] = "‚è≥ Wave", ["value"] = tostring(wave), ["inline"] = true},
                {["name"] = "üèÜ Result", ["value"] = "**" .. result .. "**", ["inline"] = true},
                {["name"] = "üéÅ Rewards", ["value"] = rewards}
            }
        }}
    }

    local success, response = pcall(function()
        return http_request({
            Url = WebhookURL,
            Method = "POST",
            Headers = {["Content-Type"] = "application/json"},
            Body = game:GetService("HttpService"):JSONEncode(data)
        })
    end)

    if success then
        print("‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!")
    else
        warn("‚ùå ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à: " .. tostring(response))
    end
end

-- üìå ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° "NEXT" ‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
local function checkNextText()
    local player = game.Players.LocalPlayer
    if not player then return end

    local screenGui = player:FindFirstChild("PlayerGui") -- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ GUI ‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
    if screenGui then
        for _, guiObject in pairs(screenGui:GetDescendants()) do
            if guiObject:IsA("TextLabel") or guiObject:IsA("TextButton") then
                if string.find(guiObject.Text, "NEXT") then
                    print("üîç ‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° NEXT ‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠! -> ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ‡∏¢‡∏±‡∏á Webhook")
                    
                    -- ‡∏î‡∏∂‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°
                    local username = player.Name
                    local level = player:FindFirstChild("level") and player.level.Value or "N/A"
                    local matchDMG = game:GetService("ReplicatedStorage"):FindFirstChild("MatchDMG") and game:GetService("ReplicatedStorage").MatchDMG.Value or 0
                    local wave = game:GetService("ReplicatedStorage"):FindFirstChild("Wave") and game:GetService("ReplicatedStorage").Wave.Value or 0
                    local result = "VICTORY" -- ‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ï‡∏≤‡∏°‡πÄ‡∏Å‡∏°
                    local rewards = game:GetService("ReplicatedStorage"):FindFirstChild("Rewards") and game:GetService("ReplicatedStorage").Rewards.Value or "None"

                    sendWebhookMessage(username, level, matchDMG, wave, result, rewards)
                    break
                end
            end
        end
    end
end

-- üîÑ ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö GUI ‡∏ó‡∏∏‡∏Å‡πÜ 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
while wait(2) do
    checkNextText()
end
